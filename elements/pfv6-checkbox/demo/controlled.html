<pfv6-checkbox id="controlled-check-1" name="check1">
  Parent CheckBox
  <pfv6-checkbox slot="body" id="controlled-check-2" name="check2">Child CheckBox 1</pfv6-checkbox>
  <pfv6-checkbox slot="body" id="controlled-check-3" name="check3">Child CheckBox 2</pfv6-checkbox>
</pfv6-checkbox>

<pfv6-checkbox id="controlled-check-4" name="check4">Controlled CheckBox</pfv6-checkbox>

<script type="module">
  import '@pfv6/elements/pfv6-checkbox/pfv6-checkbox.js';

  // Controlled checkbox logic (converted from React state)
  const check1 = document.getElementById('controlled-check-1');
  const check2 = document.getElementById('controlled-check-2');
  const check3 = document.getElementById('controlled-check-3');

  // When parent changes, update children
  // CRITICAL: Only handle events from the parent checkbox itself, not bubbled from children
  check1.addEventListener('change', (e) => {
    // Only respond if the event target is the parent checkbox itself
    if (e.target === check1 && e.checked !== null) {
      check2.checked = e.checked;
      check3.checked = e.checked;
    }
  });

  // When children change, update parent (indeterminate if only one checked)
  function updateParent() {
    if (check2.checked && check3.checked) {
      check1.checked = true;
    } else if (check2.checked || check3.checked) {
      check1.checked = null; // indeterminate
    } else {
      check1.checked = false;
    }
  }

  check2.addEventListener('change', updateParent);
  check3.addEventListener('change', updateParent);
</script>

